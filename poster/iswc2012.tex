\documentclass[runningheads,a4paper]{llncs}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\usepackage[activate=compatibility]{microtype}

% autoref command
\usepackage[pdftex,urlcolor=black,colorlinks=true,linkcolor=black,citecolor=black]{hyperref}
\def\sectionautorefname{Section}
\def\subsectionautorefname{Subsection}
\def\figureautorefname{Fig.}

\usepackage{graphicx}

\usepackage{xspace}
\newcommand{\googleplus}{Google\nolinebreak\hspace{0em}\raisebox{.28ex}{\tiny\bf +}\kern-0.2ex\xspace}

% listings and Verbatim environment
\usepackage{color}
\usepackage{fancyvrb}
\usepackage{relsize}
\usepackage{listings}
\usepackage{verbatim}
\newcommand{\defaultlistingsize}{\fontsize{8pt}{9.5pt}}
\newcommand{\inlinelistingsize}{\fontsize{8pt}{11pt}}
\newcommand{\smalllistingsize}{\fontsize{7.5pt}{9.5pt}}
\newcommand{\listingsize}{\defaultlistingsize}
\RecustomVerbatimCommand{\Verb}{Verb}{fontsize=\inlinelistingsize}
\RecustomVerbatimEnvironment{Verbatim}{Verbatim}{fontsize=\defaultlistingsize}
\lstset{frame=lines,captionpos=b,numberbychapter=false,escapechar=§,
        aboveskip=0.5em,belowskip=0em,abovecaptionskip=0em,belowcaptionskip=0em,
framexbottommargin=-1em,
        basicstyle=\ttfamily\listingsize\selectfont}

\definecolor{lightgray}{rgb}{.9,.9,.9}
\definecolor{darkgray}{rgb}{.4,.4,.4}
\definecolor{purple}{rgb}{0.65, 0.12, 0.82}

\lstdefinelanguage{JavaScript}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{red},
  sensitive=false,
  showstringspaces=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\color{black}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}

% todo macro
\newcommand{\todo}[1]{\noindent\textcolor{red}{{\bf \{TODO}: #1{\bf \}}}}

\hyphenation{NiteOutMag}

\usepackage{comment}

%\linespread{0.98}

\begin{document}

\title{NiteOutMag: At Least the Web\\ Remembers What Happened Last Night}
\titlerunning{NiteOutMag}
\authorrunning{NiteOutMag}

\author{Thomas Steiner\inst{1} \and
		Ruben Verborgh\inst{2} \and \\
		Joaquim Gabarro\inst{1} \and 
		Rik Van de Walle\inst{2}		
}

\institute{Universitat Politècnica de Catalunya -- Department {\sc lsi}\\
		   08034 Barcelona, Spain\\
		   \urldef{\emails}\UrlFont\path|{tsteiner,gabarro}@lsi.upc.edu|
		   \emails\rm
		   \and
		   Ghent University -- IBBT,
		   ELIS -- Multimedia Lab\\
		   Gaston Crommenlaan 8 bus 201,
		   B-9050 Ledeberg-Ghent, Belgium\\
		   \urldef{\emails}\UrlFont\path|{ruben.verborgh,rik.vandewalle}@ugent.be|
		   \emails\rm		   
}

\maketitle
% Start footnotes again by 0.
\setcounter{footnote}{0}

%%%%%%%%%%%%%%%%%%
%%%  Abstract  %%%
%%%%%%%%%%%%%%%%%%
\begin{abstract}
The chorus of the popular song \emph{TiK ToK} by the artist \emph{Ke\$ha}\footnote{Ke\$ha -- TiK Tok (\url{http://www.mtv.com/videos/keha/445445/tik-tok.jhtml})} goes \emph{``Don't stop, make it pop. DJ, blow my speakers up. Tonight, I'mma fight. 'Til we see the sunlight. Tik tok on the clock. But the party don't stop, no''}. We all know, however, that each party comes to an end eventually. With NiteOutMag, we present a~Chrome Web application that can help people recover what (the hell) happened last night. Among the younger generation, nightlife activities---just about like any other activity---together with related multimedia data get shared online on social networks. The problem is that for one and the same event, the event-related user-generated data may be shared on a~plethora of social networks. With this paper, we introduce an application that leverages description of events from several event databases, social data from multiple social networks, and media data from some media sharing platforms. The data collected is attached to events held in a~given area and further processed to generate an event-centric, magazine style presentation, where each page represents an event illustrated by media. Just like the nightlife of people happens \emph{ad hoc} from one party to the other, the NiteOutMag~app as well gathers all its data on-the-fly, without the burden of pre-compiled data directories. The app is available online.
\end{abstract}

%\category{H.3.4}{Information Systems}{Information Storage and Retrieval}[World Wide Web]
%\category{H.3.5}{Online Information Services}{Web-based services}

%\keywords{}

%%%%%%%%%%%%%%%%%%%%%%%%%
%%%  1. Introduction  %%%
%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Introduction}                                                      \label{sec:introduction}
In March 2012, 901 million monthly active users of the social networking site (SNS) Facebook have uploaded more than 300 million photos on average per day~\cite{Facebook2012}. Many of those photos are event-related and typically illustrate events such as music concerts that a~user has attended. Facebook, however, albeit the biggest, is only one among a~plethora of social networks that people use to share event-related content.
A~social network is an online service or media platform that focuses on building and reflecting social relationships among people sharing interests and/or activities. For this paper, we consider eleven different social networks that represent all together most of the Western world's market share. In detail, the considered social networks are
\googleplus (\url{google.com/+}),
Myspace (\url{myspace.com}),
Facebook (\url{facebook.com}),
Twitter ({\url{twitter.com}),
Instagram (\url{instagram.com}),
Flickr (\url{flickr.com}),
YouTube (\url{youtube.com}),
yfrog (\url{yfrog.com}),
MobyPicture (\url{mobypicture.com}),
Twitpic (\url{twitpic.com}), and
\mbox{img.ly} (\url{img.ly}).
We consider event databases that maintain listings of past and upcoming events using crowd sourcing techniques and that can be queried programmatically. More precisely, we include data from four event databases, namely Eventful (\url{eventful.com}), Foursquare (\url{foursquare.com}), Upcoming (\url{upcoming.org}), and Google Places (\url{google.com/places}).
With this paper, we propose to fully automatically generate an event-centric magazine where each page corresponds to a~known event that is illustrated with media shared on the Web. The application\footnote{NiteOutMag app (\url{http://goo.gl/fjuE5})} and a~screencast\footnote{Screencast of the app (\url{https://t.co/3R8h2RnW})} are available online. 

%%%%%%%%%%%%%%%%%%%%%%%%%
%%%  2. Related Work  %%%
%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Related Work}                                                      \label{sec:related-work}
Capturing life moments and building narratives using social networks is addressed in~\cite{Atosy2011}, where the authors investigated about the interaction between event stories and the use of social networks to tell them. They proposed Storify~\cite{Storify2012}, a~Web application that supports users to perform story telling. Storyful~\cite{Storyful2012} is an application  that allows the user to navigate through stories created by other users or to create own ones, aggregating the content available from Twitter, YouTube, etc.

Events play a~key role in human life and illustrating events with media items stemming from social networks is a~very active research topic. In~\cite{Brenner2012}, Brenner and Izquierdo present an approach to detect social events and retrieve associated photos in collaboratively annotated photo collections combining data of various modalities such as time, location, and textual and visual features. In~\cite{Liu2011}, Liu \emph{et al.} present a~method for combining semantic inferencing and visual analysis for automatically gathering photos and videos illustrating events. Regarding aesthetic aspects of media compilation, in~\cite{Sandhaus2011}, Sandhaus \emph{et al.} consider visual and aesthetic features for the automatic creation of photo books. Obrador \emph{et al.} use visual and aesthetic features for~a category-based approach to automatically assess the aesthetic appeal of photographs~\cite{Obrador2012}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%  3. Implementation  %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Implementation}                                                    \label{sec:implementation}
In this section, we provide implementation details of the NiteOutMag application. It is implemented as a~Chrome Web application, as this technique allows for whitelisting specific domains for cross-domain access via \texttt{XMLHttpRequest} calls since not all APIs in use are CORS-enabled\footnote{CORS-enabled websites (\url{http://enable-cors.org/})}.

\paragraph{Geocoding}
The application focuses on events that occurred in a~certain area. While event databases tend to work based on concrete GPS points like
(40.7590110, -73.98447220), \emph{i.e.}, a~pair composed of a~latitude and a~longitude, human beings use more human-friendly place names such as \emph{Times Square, New York}. Geocoding is the process of finding the geographic coordinates (generally expressed as latitude and longitude) associated to other geographic data such as an address composed of a~street name and a~zip code. The user can enter an exact address, such as \emph{618 W. 46th St, New York, NY 10036}, or a~very broad area like \emph{Las Vegas}. The returned latitude and longitude pair is the center of the particular area of interest. In our implementation, we use the Google Geocoding API~\footnote{Google Geocoding API (\url{http://goo.gl/E34Gl})}.

\paragraph{Event Search}
Based on a~latitude and longitude pair, we search for events that took place near this location (in a~radius of five kilometers) in the recent past using the respective event search APIs~\footnote{Event search APIs in use (\url{http://goo.gl/54tjV}, \url{http://goo.gl/nHE9F}, \url{http://goo.gl/mLbdd}, \url{http://goo.gl/XtXuE})}. We sanitize the event titles by removing HTML tags, punctuation,
common abbreviations (such as \emph{w/}, which becomes \emph{with}, or \emph{ft./feat.}, which becomes \emph{featuring}). Event directories can overlap in their coverage. Therefore, we deduplicate the returned set of events based on the simple, yet effective Levenshtein distance on the event titles with an empirically determined editing distance of five. Hence, we are capable to find that the event names \emph{Titanic} and \emph{Titanic 3D} correspond to the same movie event.

\paragraph{Media Search} \label{sec:media-search}
Unlike event search, media search in our application is \emph{not} based on geolocation. According to a~study performed in May 2012 by Seline~\cite{Quora2012},
only roughly 1\% of all microposts on Twitter are geotagged. In addition to that, as our approach covers more SNSs than Twitter, we need to consider that not all SNSs support geotagging of content. In consequence, we use a~two-tier approach for media search. We illustrate this by a~real event of a~Beach Boys concert\footnote{Beach Boys concert (\url{http://www.thebeachboys.com/\#tour})} in the Merriweather Post Pavilion in Columbia, MD. The event name is \emph{Beach Boys},
the venue name is \emph{Merriweather Post Pavilion}, and the area is \emph{Columbia, Maryland (MD)}. We define as \emph{human-friendly address} the first part up to the comma of the \texttt{formatted\_address} field in the Google Geocoding API, \emph{i.e.}, \emph{Columbia} in this case. Human beings aware of the local context do not need to disambiguate, \emph{i.e.}, there is no need to explicitly state \emph{MD}. The two-tier approach consists thus of a~full-text search for:
\begin{itemize}
 \item \emph{(i)} the (event name) $+$ the (venue name), and
 \item \emph{(ii)} the (event name) $+$ the (human-friendly address).
\end{itemize}

We have implemented a~media collector consisting of media extractors for all SNSs listed in \autoref{sec:introduction}.
This media collector was first described in~\cite{Khrouf2012}.
It takes a~search term as an input, \emph{e.g.}, \emph{Beach Boys Columbia} for the example above, and then performs a~parallel full-text search using the search APIs of all SNSs. When all the media extractors have responded, a~unified SNS-agnostic output is delivered. We propose a~common alignment schema, illustrated in
\autoref{lst:media}, which shows the resulting metadata for an exemplary media item.  \autoref{fig:architecture} depicts the overall architecture of the media collector.

% Ruben, can we add the \googleplus command to the caption? 
% I get an error when I try.
\begin{lstlisting}[language=JavaScript,caption={Sample output of the media collector showing a~Google+ post (edited for legibility, URLs shortened).},label={lst:media}]
{
  "mediaurl": "http://t.co/ubagkiR9",
  "storyurl": "https://t.co/dau5pBWD",
  "message": {
    "text": "My wife, who once said her vision of
        heaven was being on the lawn bouncing
        around beach balls at a Beach Boys
        concert [...]
        <a href=\"http://t.co/pH2OV1fW\" >
        http://t.co/pH2OV1fW</a> [...]",
    "clean": "My wife, who once said her vision of
        heaven was being on the lawn bouncing
        around beach balls at a Beach Boys
        concert [...]"
  },
  "user": "https://t.co/gIf2UVZR",
  "type": "photo",
  "timestamp": 1329342797000,
  "published": "2012-02-15T21:53:17.000Z"
}
\end{lstlisting}

\begin{figure*}[htb!]
\centering
\includegraphics[width=0.8\linewidth]{./architecture.pdf}
\caption{Overview of the media collector: hybrid approach for the media item extraction process using a~combination of API access and Web scraping}
\label{fig:architecture}
\end{figure*}

\paragraph{Magazine Layout}
In order to create the illusion of a~real magazine, the ability of flipping from page to page needs to be as credible as possible. The open-source library \texttt{turn.js} by Emmanuel García~\footnote{\texttt{turn.js} library (\url{http://www.turnjs.com/})} allows for the dynamic creation of magazines solely based on HTML5 technologies with a~very realistic page flip effect. We treat each event as one page of the magazine, add the event metadata as headline and subheading of the page, and arrange the images and accompanying microposts to fill up the page as illustration. For each event, we use the image with the highest resolution as background image of the page in order to create a~lifestyle magazine appearance. For additional print-like look and feel, we use drop caps (\autoref{fig:screenshot}). The title page gets dynamically created based on a~Google image search for the (human-friendly address) $+$ the keyword (nightlife).

%%%%%%%%%%%%%%%%%%%%%%%%
%%%  4. Experiments  %%%
%%%%%%%%%%%%%%%%%%%%%%%%

\section{Evaluation}                                                       \label{sec:experiments}
We have evaluated our application with the top ten list of United States cities by population\footnote{Top 10 list of US cities (\url{http://goo.gl/A6jPU})} with promising results.

\begin{figure}[b!]
\centering
\includegraphics[width=1.0\columnwidth]{./screenshot.jpg}
\caption{Screenshot of the NiteOutMag application with two events from Las Vegas and the righthand-side page about to be flipped}
\label{fig:screenshot}
\end{figure}

\subsection{Future Work and Conclusion}
The results stand and fall with the quality of the events in the event databases. One of the problems we encountered are event titles such as
\emph{Kandyland 2012 @ the Playboy Mansion -- 1.877.VIP.MANSION}\footnote{Kandyland 2012 event (\url{http://t.co/YUm7FtmE})}, which combine the event name with the venue name
and a~vanity contact phone number. The detection of such composed titles is difficult and requires advanced linguistic processing.
Event deduplication is a~second issue. The two movie events \emph{The Avengers} and \emph{Marvel's The Avengers 3D} are the same for a~human being. However, for a~machine, the duplication is harder to detect. Media item deduplication is a~task that we have left for future work.

In this paper, we have reported on a~Chrome Web application that illustrates events via four event databases and eleven social networks and media sharing platforms. The application harvests event-related data on-the-fly for a~user-determined center of interest and compiles the data in an aesthetic lifestyle magazine. Using popular party destinations, big cities, and places of interests, we have evaluated the retrieved results for both relevancy and visual appeal, with a~special focus on optimized recall. While there are actionable issues for future work, we are quite happy with the outcome so far.

%%%%%%%%%%%%%%%%%%%%%%%%%
%%%  Acknowledgments  %%%
%%%%%%%%%%%%%%%%%%%%%%%%%

\section*{Acknowledgments}                                                   \label{sec:acknowledgments}
\small
T. Steiner is partially supported by the European Commission
under Grant No.~248296 FP7 (\mbox{I-SEARCH} project).
R. Verborgh is funded by Ghent University,
the Interdisciplinary Institute for Broadband Technology~(\mbox{IBBT}),
the Institute for the Promotion of Innovation by Science and Technology in Flanders~(\mbox{IWT}),
the Fund for Scientific Research Flanders~(\mbox{FWO} Flanders), and the European Union.
R. Troncy is partially supported by the French National Agency under contracts ANR.11.EITS.006.01, ``Open Innovation Platform for Semantic Media'' (OpenSEM) and the European Union's 7$^{th}$ Framework Programme via the project LinkedTV (GA 287911).

%%%%%%%%%%%%%%%%%%%%%%
%%%  Bibliography  %%%
%%%%%%%%%%%%%%%%%%%%%%
\linespread{1}
\bibliographystyle{abbrv}
\bibliography{iswc2012}

\end{document}
